<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/app_hs.css">
    <title>Fridge contents</title>
</head>
<body>
    <nav>
        <nav id='menu'>
            <input type='checkbox' id='responsive-menu' onclick='updatemenu()'>
            <ul>
                <li>
                    <img class="logo" src="img/logo.png" alt="">
                </li>
                <li class="nav-link">
                    <a class="nav-link"  href='app_homescreen.html'>Home</a>
                </li>
                <li class="nav-link">
                    <a class="nav-link" href='fridge_contents.html'>Fridge contents</a>
                </li>
                <li class="nav-link">
                    <a class="nav-link" href='sharing_is_caring.html'>Sharing is caring</a>
                </li>
                <li class="nav-link">
                    <a class="nav-link" href='shopping_list.html'>Shopping list</a>
                </li>
                <li class="nav-link">
                    <a class="nav-link" href='recipes.html'>Recipes</a>
                </li>
            </ul>
          </nav>
          <!-- Hier komt site specefieke informatie te staan -->
          <div>
            <video id="preview"></video>
            <button id="snap">Snap Photo</button>
          </div>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
          <script >
        // access the camera
        navigator.mediaDevices.getUserMedia({ video: true })
        .then(function(stream) {
            var video = document.getElementById('preview');
            video.srcObject = stream;
            video.play();
        });
        
        // when the snap button is clicked
        document.getElementById('snap').addEventListener('click', function() {
        var canvas = document.createElement('canvas');
        var video = document.getElementById('preview');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        var img = canvas.toDataURL('image/png');
        
        // decode the barcode
        Quagga.decodeSingle({
            decoder: {
                readers: ["code_128_reader"]
            },
            locate: true,
            src: img
        }, function(result) {
            if (result.codeResult) {
                console.log(result.codeResult.code);
            } else {
                console.log("No barcode found.");
            }
        });
        });

          </script>
        <script src="javascript/activebutton.js">

        </script>
    </nav>
</body>
</html>